<p align="center">
    <a href="https://app.ocula.io">
        <img src="https://github.com/andrewcourtice/ocula/raw/master/client/src/assets/images/logo/logo-192.svg" alt="Погода"/>
    </a>
</p>

# Погода
Бесплатное прогрессивное погодное приложение с открытым исходным кодом

<!-- TOC depthfrom:2 -->

- [О приложении](#о-приложении)
- [Возможности](#возможности)
- [Запуск приложения](#запуск-приложения)
- [Философия](#философия)


<!-- /TOC -->

## О приложении
Погода - это приложение, полностью созданное с использованием современных веб-стандартов, целью которого является создание красивого погодного приложения, которым может пользоваться любой человек на любом устройстве, а также предоставление простого шаблона PWA для разработчиков.

Это приложение было создано в качестве замены любимого погодного приложения.

<p align="center">
    <img src="https://user-images.githubusercontent.com/11718453/93705532-95b09a80-fb61-11ea-89d9-e72e6146aea2.png" width="192" />
    <img src="https://user-images.githubusercontent.com/11718453/93705531-93e6d700-fb61-11ea-8201-80efecfc95d3.png" width="192" />
    <img src="https://user-images.githubusercontent.com/11718453/93705526-8e898c80-fb61-11ea-82aa-cf381b5e13a3.png" width="192" />
</p>
<p align="center">
    <img src="https://user-images.githubusercontent.com/11718453/94127849-c57edb80-fe9c-11ea-9590-34e43c0b2ae0.png" width="192" />
    <img src="https://user-images.githubusercontent.com/11718453/94127875-cb74bc80-fe9c-11ea-8f7c-47550a6a3607.png" width="192" />
    <img src="https://user-images.githubusercontent.com/11718453/93705522-87fb1500-fb61-11ea-8b2d-cefa59c9c712.png" width="192" />
</p>

## Возможности
- Без географических ограничений - доступно по всему миру
- Ежедневный прогноз на срок до 8 дней
- Почасовой прогноз на срок до 24 часов
- Графики трендов для почасовой температуры, осадков и ветра
- Информация о океанских приливах с графиком высоты прилива
- Интерактивные погодные карты с 6 различными типами (радар, осадки, температура, облачность, ветер, давление)
- Покадровое воспроизведение радарных изображений для визуализации приближающегося дождя
- Темная/Светлая темы. Тема по умолчанию меняется в зависимости от текущего времени суток
- Возможность изменения порядка или скрытия разделов прогноза, выбора предпочитаемого типа карты, единиц измерения и многое другое
- С открытым исходным кодом, конфиденциально и, что самое главное - бесплатно

## Запуск приложения

### Вариант 1: Запуск с Docker (Рекомендуется)

#### Требования
- **Docker** версии 20.10 или выше
- **Docker Compose** версии 1.29 или выше
- **API ключи** от сервисов погодных данных (см. ниже)

#### Быстрый старт с Docker

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd Weather
```

2. Настройте переменные окружения:
```bash
cp client/.env.example client/.env
```

3. Откройте файл `client/.env` и вставьте ваши API ключи:
```bash
MAPBOX_API_KEY=ваш_ключ_mapbox
OWM_API_KEY=ваш_ключ_openweathermap
WORLDTIDES_API_KEY=ваш_ключ_worldtides
GA_TRACKING_ID=
SENTRY_DSN=
```

4. Запустите приложение с помощью Docker Compose:
```bash
docker-compose up -d
```

Приложение будет доступно по адресу: http://localhost:3000

#### Управление Docker контейнером

Остановить приложение:
```bash
docker-compose down
```

Просмотр логов:
```bash
docker-compose logs -f weather-app
```

Пересобрать образ после изменений:
```bash
docker-compose up -d --build
```

Остановить и удалить контейнеры с volumes:
```bash
docker-compose down -v
```

#### Альтернативный запуск через Docker (без Compose)

Сборка образа:
```bash
docker build -t weather-app .
```

Запуск контейнера:
```bash
docker run -d \
  --name weather-app \
  -p 3000:3000 \
  --env-file ./client/.env \
  weather-app
```

### Вариант 2: Локальная разработка

#### Требования
- **Node.js** версии 16.x или выше (рекомендуется v22.12.0)
- **Yarn** package manager
- **API ключи** от сервисов погодных данных (см. ниже)

### Настройка переменных окружения

Для работы приложения необходимы API ключи от следующих сервисов:

1. Скопируйте файл `.env.example` в `.env` в папке `client/`:
```bash
cp client/.env.example client/.env
```

2. Получите API ключи:
   - **MAPBOX_API_KEY** (обязательно) - для отображения карт
     Получить: https://www.mapbox.com/

   - **OWM_API_KEY** (обязательно) - для данных о погоде и карт осадков/температуры
     Получить: https://openweathermap.org/api

   - **WORLDTIDES_API_KEY** (обязательно) - для данных о приливах и отливах
     Получить: https://www.worldtides.info/developer

   - **GA_TRACKING_ID** (опционально) - для Google Analytics

   - **SENTRY_DSN** (опционально) - для отслеживания ошибок

3. Откройте файл `client/.env` и вставьте полученные ключи:
```bash
MAPBOX_API_KEY=ваш_ключ_mapbox
OWM_API_KEY=ваш_ключ_openweathermap
WORLDTIDES_API_KEY=ваш_ключ_worldtides
GA_TRACKING_ID=
SENTRY_DSN=
```

### Установка зависимостей
```bash
yarn install
```

### Запуск в режиме разработки
```bash
PORT=3000 NODE_OPTIONS='--openssl-legacy-provider' yarn dev
```

После запуска приложение будет доступно по адресу: http://localhost:3000

### Сборка для продакшена
```bash
yarn build
```

### Примечания
- Флаг `--openssl-legacy-provider` необходим для совместимости с Node.js v17+
- Приложение использует Dart Sass вместо устаревшего node-sass
- При первом запуске могут появиться deprecation warnings - это нормально и не влияет на работу приложения
- Без API ключей приложение не сможет загружать данные о погоде и отображать карты

## Философия
Цель данного проекта - удовлетворить следующим требованиям:

- Должен быть с открытым исходным кодом и свободно доступен для всех.
- Должен быть без рекламы, без подписок, а любые полученные доходы должны использоваться для текущих расходов на обслуживание.
- Должен быть полностью построен с использованием бесплатных (или freemium) сервисов/ресурсов (включая хостинг, API, графику и т.д.).
- Должен быть быстрым, легковесным, доступным и красивым.

Надежда заключается в том, что, выполняя вышеперечисленные условия, это приложение может стать погодным приложением для всех, без навязчивой рекламы и регистраций.

Однако в результате выполнения вышеуказанных условий проект не является устойчивым без какой-либо формы монетизации. В основном используются бесплатные тарифы различных сервисов, чтобы приложение оставалось бесплатным, но с увеличением использования могут возникнуть расходы, и сервис может быть вынужден закрыться, если затраты станут обременительными. По этой причине просьба рассмотреть один из следующих вариантов:

- Если вам нравится это приложение и вы используете его как свое повседневное погодное приложение, пожалуйста, рассмотрите возможность регулярного небольшого пожертвования на проект (см. [поддержка](#поддержка)), чтобы помочь покрыть расходы на обслуживание.
- Если вы разработчик, вы можете свободно форкнуть этот репозиторий и разместить свою собственную копию в соответствии с лицензией MIT.


